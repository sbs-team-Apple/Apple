<!DOCTYPE html>
<html layout:decorate="~{common/layout}" lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<div layout:fragment="content" class="container my-3 w-10/12 m-auto">
    <div class="board-create-container">
        <a th:href="@{/board/create}"><i class="fa-solid fa-square-plus fa-2xl"></i></a>
    </div>
    <div class="m-auto w-4/12 flex flex-col board-container  justify-center items-center">
        <div  class="mt-10 appeal-img-container" th:each="board : ${board}">
            <div class="flex">
                <div class="avatar ">
                    <div class="w-10 rounded-full">
                        <img th:src="${board.siteUser.filepath}">
                    </div>
                </div>
                <div>
                    <div th:text="${board.siteUser.nickname}"></div>
                </div>
                <div class="option-btn">
                    <div class="dropdown dropdown-end">
                        <label tabindex="0" class="btn m-1">...</label>
                        <ul tabindex="0" class="dropdown-content z-[1] menu p-2 shadow bg-base-100 rounded-box w-52">
                            <li> <a th:href="@{|/board/modify/${board.id}|}">수정하기</a></li>
                            <li><a th:href="@{|/board/delete/${board.id}|}">삭제하기</a></li>
                        </ul>
                    </div>

                </div>
            </div>


            <div class="flex board-img-box ">
                <div th:each="img : ${@rq.getImgs(board)}" class="slide">
                    <img class="w-30 h-30 board-img" th:src="@{|${img.filepath}|}" alt="">

                </div>
                <div class="btn-box">
                    <button class="prevButton img-btn"><i class="fa-regular fa-circle-left fa-2xl"></i></button>
                    <button class="nextButton img-btn"><i class="fa-regular fa-circle-right fa-2xl"></i></button>
                </div>
            </div>




            <div >
                <div th:text="${board.content}"></div>
                <div class="flex">


<!--                <div th:text="${board.siteUser.age}+'/'"></div>-->
<!--                    <div th:text="${board.siteUser.nickname}+'/'"></div>-->

<!--                    <div th:text="${board.siteUser.living}"></div>-->

                </div>
            </div>



        </div>
    </div>

    <br>




</div>
</body>
</html>

<style>

    .board-img-box {
        overflow: hidden;
        position: relative;
    }

    /* 이미지 슬라이더 슬라이드 스타일링 */
    .slide {
        float: left;
        display: none;
    }

    /* 현재 슬라이드만 표시 */
    .slide.active {
        display: block;
    }

    /* 버튼 스타일링 (선택사항) */
    #prevButton, #nextButton {
        cursor: pointer;
    }


    .navbar {
        position:fixed;
    }

    .container{
        width:100%;
    }

    .board-create-container{
        position:fixed;
        top:50px;
        right:10px;
        margin-top:20px;
        z-index :5;
    }

    .appeal-img-container{
        width:40%;

        border-bottom:1px solid #f08dac;
        padding-bottom:20px;

    }

    @media screen and (max-width: 600px) {

        .appeal-img-container{
        width:100%;

    }
     }

    .avatar{
        z-index:-1;
    }

    .option-btn{
        margin-left:auto;
    }

    .board-container{
        width:100%;
        margin-top:50px;
        margin-left:auto;
        margin-right:auto;
    }
    .board-img-box{
        width:100%;
        flex-direction: column;
        position:relative;

    }

    .btn-box {
        position : absolute;
        top:50%;
        left:0;
        width:100%;
        display:flex;
        justify-content: space-between;
        transform : translate(0, -50%);
    }
    .img-btn {
        margin:10px;

    }


    .board-img {
        width:100%;
        height:250px;

    }

       @media screen and (max-width: 600px) {

       .board-img {
        width:100%;
        height:250px;

         }
     }

</style>



<script>

    $(document).ready(function() {
    // 각 게시판에 대한 슬라이더를 설정
    $(".board-img-box").each(function() {
        var currentSlide = 0;
        var slides = $(this).find(".slide");
        var prevButton = $(this).find(".prevButton");
        console.log(currentSlide);
        var nextButton = $(this).find(".nextButton");

        showSlide(currentSlide);

        prevButton.click(function() {
        console.log(123);
            showSlide(currentSlide - 1);
        });

        nextButton.click(function() {
        console.log(123);
            showSlide(currentSlide + 1);
        });

        function showSlide(slideIndex) {
            if (slideIndex < 0) {
                slideIndex = slides.length - 1;
            } else if (slideIndex >= slides.length) {
                slideIndex = 0;
            }

            slides.eq(currentSlide).removeClass('active');
            slides.eq(slideIndex).addClass('active');
            currentSlide = slideIndex;
        }
    });
});
</script>

